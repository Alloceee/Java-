# 数据库连接池

#### 1 用BlockingQuee + 代理模式实现连接池**

#### **2 使用连接池框架**

l C3p0

l DBCP

l Druid

#### 数据库连接池的工作机制

- J2EE服务器启动时会建立一定数量的池连接，并一直维持不少于此数目的池连接。客户端程序需要连接时，池驱动程序会返回一个未使用的池连接并将其标记为忙。如果当时没有空闲连接，池驱动程序就新建一定数量的连接，新建连接的数量由配置参数决定。当使用的池连接调用完成后。池驱动程序就将此连接标记为空闲，其他调用就不可以使用这个连接。

#### 关系数据库中连接池的机制

- 前提：为数据库连接建立一个缓冲池
- 从连接池获取或创建可用连接
- 使用完毕之后，把连接返回给连接池
- 在系统关闭之前，断开所有连接并释放连接占用的系统资源
- 能够处理无效连接，限制连接池中的连接总数不低于或者不超过某个限定值