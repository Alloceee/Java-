# ORM

- 定义：
  - 对象—关系映射（Object/Relaction Mapping，简称ORM），是随着面向对象的软件开发方法发展而产生的。面向对象的开发方法是当今企业级应用开发环境中的主流开发方法，关系数据库是企业级应用环境中永久存放数据的主流数据存储系统。对象和关系数据是业务实体的两种表现形式，业务实体在内存中表现为对象，在数据库中表现为关系数据。内存中的对象之间存在关联和继承关系，而在数据库中，关系数据无法直接表达多对多关联和继承关系。因此，对象—关系映射（ORM）系统一般以中间件的形式存在，只要实现程序对象到关系数据库数据的映射。
- ORM方法论基于三个核心原则：
  - 简单性：以最基本的形式建模数据
  - 传达性：数据库结构被任何人都能理解的语言文档化
  - 精确性：基于数据模型创建真正标准化了的结构
- 一般的ORM包括一下四个部分：
  - 一个对持久类对象进行CURD操作的API
  - 一个语言或API用来规定与类和类属性相关的查询
  - 一个规定mapping metadata的工具
  - 一种技术可以让ORM的实现同事务对象一起进行dirty checking,lazy association fetching以及其他的优化操作
- ORM技术特点
  - 提高了开发效率，由于ORM可以自动对Entity对象与数据表中进行字段和属性的映射，所以我么就不需要了数据访问层
  - ORM提供了对数据库的映射，不用写sql语句就可以操作数据库
- ORM优缺点
  - 优点
    - 提高开发效率，降低开发成本
    - 纯粹的面向对象开发
    - 可移植
  - 缺点
    - 从系统结构上来看，采用ORM框架一般多分层，系统的层次多了，会降低系统的性能，ORM是完全面向对象的做法，而面向对象的做法也会对性能产生影响
    - 在数据库应用上可能被误用，主要体现在对持久化对象的提取和数据加工处理上，如果用上ORM，可能将全部的数据提取到内存对象中，这就会产生性能问题
    - 在做对象持久化时，ORM会持久化所有的对象，我们不希望这样，也会降低程序性能
    - 在进行多级联表查询时，ORM语法会变得复杂
    - EF对各个数据的支持程度是不对称的