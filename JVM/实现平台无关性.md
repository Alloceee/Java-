# 平台无关性（一次编译，到处运行）

- 平台无关性如何实现
  - 编译时生成.class的字节码文件，保存java翻译生成的二进制字节码（类文件中的属性、方法以及常量信息，还会增加一个公有的静态常量属性.class，这个属性记录类的相关信息以及类型信息，是class的一个实例）
  - javap jdk自带的一个反编译器
  - javap -c 对代码进行反编译，用来查看字节码
  - 总结：Java源码首先被编译生成字节码，再由不同平台的JVM进行解析，Java语言在不同的平台上运行时不需要进行重新编译，JVM虚拟机在执行字节码的时候，把字节码转换成具体平台上的机器指令
- 为什么JVM不直接将源码解析成机器码去执行
  - 准备工作：每次执行都需要各种检查
  - 兼容性：也可以将别的语言解析成字节码，这些字节码同样可以被JVM调用执行
- JVM如何加载.class文件
  - Java虚拟机（JVM）
    - 抽象化的计算机，通过在实际的计算机上仿真、模拟各种计算机功能来实现
    - JVM有自己完善的硬件架构，如处理器、堆、栈、寄存器等，还具有相应的指令系统，JVM屏蔽了与具体操作系统平台相关的信息，使得Java程序员只需生成在Java虚拟机上进行的目标代码及字节码就可以在多种平台上不加修改的运行
    - JVM存在的原因：屏蔽底层操作系统存在的不同，并减少基于原生语言开发的复杂性，只要虚拟机厂商在特定操作系统上实现了虚拟机定义如何将字节码解析成本操作系统可执行的二进制文件，Java语言便能实现跨越各种平台
    - JVM主要由 ClassLoader（类加载器） 、Runtime Data Area 、Execution Engine、Native Interface四个部分组成
  - 主要通过ClassLoader将符合其格式要求的.class文件加载到内存中，再由Execution Engine去解析里面的字节码并提交给操作系统去执行