### 投票系统

springboot + thymeleaf + myBatis + MySQL

用户：登录，注册

投票项目：用户创建投票项目Project（项目标题，项目中的投票内容Item，包括标题和选项option）

用户可以将创建的工程分享给未登录用户进行投票

设定项目结束时间或者人数

后台统计结束和未结束的项目票数

打包部署云服务器



### 问题管理系统与文件管理

springboot + jsp + mybatis 

采用springmvc的文件上传与下载

打包部署云服务器



### 网盘项目

​	项目描述： 本项目实现了网盘的几个功能模块。

​	文件上传至七牛云

​				1文件上传 
​					   上传本地文件，支持秒传、断点上传功能、分块上传功能。
​					   秒传功能前端采用spark-md5.js计算文件的md5，与网盘数据库中的文件md5对比来实现
​					   秒传。 
​					   断点上传和分块上传类似，在客户端上传时，将大于40MB的文件按照每40MB为一块
​					   为单位拆分为多块。后台建立索引关联这些文件块。 同时后台会记录当前的上传
​					   字节数，发生异常时，记录该值。以便下次可以跳过n个byte进行上传。
​				2文件下载 
​					   下载网盘中的文件，支持文件的断点下载功能。
​					   同断点上传类似。
​				3好友管理
​						添加分组、添加好友。同时可以将分享给好友。
​				4消息管理
​						使用WebSocket实现消息主动推送。
​				5权限管理
​						使用过滤器和Spring的AOP实现权限控制。
​						(Shiro) 
​				6文件管理
​					     支持文件删除、重命名、移动、新建文件夹等功能。
​						 前端使用zTree框架展示文件目录。
​		 

### 秒杀项目

	项目描述： 
​			  Redis 
​			   MQ -- 
​			   有能力同学可以尝试。
​	1.使用分布式Seesion，可以实现让多台服务器同时可以响应。
2.使用redis做缓存提高访问速度和并发量，减少数据库压力，利用内存标记减少redis的访问。
3.使用页面静态化，加快用户访问速度，提高QPS，缓存页面至浏览器，前后端分离降低服务器压力。
4.使用消息队列完成异步下单，提升用户体验，削峰和降流。

5. 安全性优化：双重md5密码校验，秒杀接口地址的隐藏，接口限流防刷，数学公式验证码



2.使用了大量缓存，那么就存在缓存击穿和缓存雪崩以及缓存一致性等问题？
缓存穿透指的是对某个一定不存在的数据进行请求，该请求将会穿透缓存到达数据库。
解决方案：对这些不存在的数据缓存一个空数据，对这类请求进行过滤。

缓存雪崩指的是由于数据没有被加载到缓存中，或者缓存数据在同一时间大面积失效（过期），又或者缓存服务器宕机，导致大量的请求都到达数据库。
解决方案：
为了防止缓存在同一时间大面积过期导致的缓存雪崩，可以通过观察用户行为，合理设置缓存过期时间来实现；
为了防止缓存服务器宕机出现的缓存雪崩，可以使用分布式缓存，分布式缓存中每一个节点只缓存部分的数据，当某个节点宕机时可以保证其它节点的缓存仍然可用。
也可以进行缓存预热，避免在系统刚启动不久由于还未将大量数据进行缓存而导致缓存雪崩。
例如：首先针对不同的缓存设置不同的过期时间，比如session缓存，在userKey这个前缀中，设置是30分钟过期，并且每次用户响应的话更新缓存时间。这样每次取session,都会延长30分钟，相对来说，就减少了缓存过期的几率

缓存一致性要求数据更新的同时缓存数据也能够实时更新。

解决方案：
在数据更新的同时立即去更新缓存，首先尝试从缓存读取，读到数据则直接返回；如果读不到，就读数据库，并将数据会写到缓存，并返回。
在读缓存之前先判断缓存是否是最新的，如果不是最新的先进行更新，需要更新数据时，先更新数据库，然后把缓存里对应的数据失效掉（删掉）。

3.大量的使用缓存，对于缓存服务器，也有很大的压力，思考如何减少redis的访问？
在redis预减库存的时候，内存中维护一个isOvermap作为一个内存标记，当没有库存的时候，将其置为true。每次秒杀业务访问redis之前，查一下map标记，如果true说明没有库存，就直接返回失败，无需再去请求redis服务器。

4.在高并发请求的业务场景，大量请求来不及处理，甚至出现请求堆积时候？
消息队列，用来异步处理请求。每次请求过来，先不去处理请求，而是放入消息队列，然后在后台布置一个监听器，分别监听不同业务的消息队列，有消息来的时候，才进行秒杀业务逻辑。这样防止多个请求同时操作的时候，数据库连接过多的异常。

5.怎么保证一个用户不能重复下单？
解决：秒杀订单表中建立一个唯一索引（所引是用户Id与商品goodsId），使得第一个记录可以插入，第二个则出错，然后通过事务回滚，防止一个用户同时发出多个请求的处理，秒杀到多个商品。

唯一索引，即是唯一的意思，在数据库表结构中对字段添加唯一索引后进行数据库进行存储操作时数据库会判断库中是否已经存在此数据，不存在此数据时才能进行插入操作。

这虽然是个小技能，但实际上在业务开发中是个很实用的技能，比如在高并发业务中，数据库如何杜绝数据并发插入两条相同的订单号呢？添加一个唯一索引当然是最快捷的方法之一，当然是添加索引还是通过业务代码去解决因公司业务而定

6.怎么解决超卖现象？
超卖场景：不同用户在读请求的时候，发现商品库存足够，然后同时发起请求，进行秒杀操作，减库存，导致库存减为负数。

最简单的方法，更新数据库减库存的时候，进行库存限制条件，在reduceStock(GoodsVo goodsvo)这个方法里，sql要多加一个stock_count > 0 ，使用数据库特性来保证超卖的问题，只有stock_count还大于0的时候才去读stock_count然后减1操作

```java
@Update("update miaosha_goods set stock_count=stock_count-1 where goods_id=#{goodsId} and stock_count>0")
	public void reduceStock(MiaoshaGoods goods); 
```



#### 7.页面静态化的过程及什么是浏览器缓存？
将HTML静态页面缓存在客户端浏览器，只有数据通过ajax异步调用接口来获取，仅仅交互的是部分数据，减少了带宽，也加快用户访问的速度。

浏览器缓存就是把一个已经请求过的Web资源（如html页面，图片，js，数据等）拷贝一份副本储存在浏览器中。缓存会根据进来的请求保存输出内容的副本。当下一个请求来到的时候，如果是相同的URL，缓存会根据缓存机制决定是直接使用副本响应访问请求，还是向源服务器再次发送请求。比较常见的就是浏览器会缓存访问过网站的网页，当再次访问这个URL地址的时候，如果网页没有更新，就不会再次下载网页，而是直接使用本地缓存的网页。只有当网站明确标识资源已经更新，浏览器才会再次下载网页。

#### 8.秒杀架构设计理念？
限流： 鉴于只有少部分用户能够秒杀成功，所以要限制大部分流量，只允许少部分流量进入服务后端。

削峰：对于秒杀系统瞬时会有大量用户涌入，所以在抢购一开始会有很高的瞬间峰值。高峰值流量是压垮系统很重要的原因，所以如何把瞬间的高流量变成一段时间平稳的流量也是设计秒杀系统很重要的思路。实现削峰的常用的方法有利用缓存和消息中间件等技术。

异步处理：秒杀系统是一个高并发系统，采用异步处理模式可以极大地提高系统并发量，其实异步处理就是削峰的一种实现方式。

内存缓存：秒杀系统最大的瓶颈一般都是数据库读写，由于数据库读写属于磁盘IO，性能很低，如果能够把部分数据或业务逻辑转移到内存缓存，效率会有极大地提升。

可拓展：当然如果我们想支持更多用户，更大的并发，最好就将系统设计成弹性可拓展的，如果流量来了，拓展机器就好了。像淘宝、京东等双十一活动时会增加大量机器应对交易高峰。

9.秒杀系统架构设计思路？
将请求拦截在系统上游，降低下游压力：秒杀系统特点是并发量极大，但实际秒杀成功的请求数量却很少，所以如果不在前端拦截很可能造成数据库读写锁冲突，最终请求超时。
利用缓存：利用缓存可极大提高系统读写速度。
消息队列：消息队列可以削峰，将拦截大量并发请求，这也是一个异步处理过程，后台业务根据自己的处理能力，从消息队列中主动的拉取请求消息进行业务处理。
10.假如减了库存用户没有支付，库存怎么还原继续参加抢购?
设定一个最长付款时间，比如30分钟，后台有个定时任务（使用定时器Timer），轮训超过30分钟的待付款订单(数据库里面判定订单状态)，然后关闭订单，恢复库存。





###  OA系统

​	项目描述： 
​			考勤模块 
​			员工管理模块 
​			流程： 
​				请假
​				调休
​				病假
​			审批
​			邮件( JavaMail )
​		

### 点餐、系统

​	后台：SpringBoot 
​	管理系统：商家CMS。
​	前端： 微信小程序。



分布式、多线程、异步（中间件）、缓存



实现一个个人博客