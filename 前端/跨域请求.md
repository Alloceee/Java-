# JSONP原理

- javascript有一个很重要的安全性限制，称为“Same-Origin Policy”（同源策略），禁止跨域操作。
- 然而深度编程需要跨域操作，JSONP跨域GET请求是一个很好的策略
- 主要是利用了script标签可以跨域链接资源的特性。
- 基本原理：动态添加一个<script>标签，使用script标签的src属性没有跨域的限制的特点实现跨域。首先在客户端注册一个callback，然后把callback的名字传给服务器。此时服务器先生产json数据，然后以javascript语法的方式，生成一个function，function名字就是传递上来 的参数jsonp，最后将json数据直接以入参的方式，放置到function中，这样就生成了一段js语法的文档，返回给客户端。
- 客户端浏览器，解析script标签，并执行返回的javascript文档，此时数据作为参数，传入到客户端预先定义好的callback函数里
- 具体操作

```html
<script type="text/javascript">
 function aa(dat){
    alert([dat.name](http://dat.name));
 }
</script>
<script type="text/javascript" src="....../js/data.js"></script>
```



- 页面上定义一个函数，引用一个外部js文件，外部js文件的地址可以是不同域的地址，外部js文件的内容如下：

- ```javascript
  aa({"name":"tom","age":18});
  ```

- 外部js文件调用页面上定义的函数，通过参数把数据传进去。

